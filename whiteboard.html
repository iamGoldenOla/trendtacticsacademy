<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whiteboard - Trendtactics Academy</title>
    <link rel="icon" href="/images/Trendtactics-logo - Copy.jpg" type="image/jpeg">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #00D9FF;
            --primary-dark: #00B8D9;
            --secondary: #7C3AED;
            --bg-dark: #0B1437;
            --bg-darker: #060D24;
            --bg-card: rgba(15, 25, 55, 0.95);
            --text-primary: #FFFFFF;
            --text-secondary: #94A3B8;
            --text-muted: #64748B;
            --border: rgba(0, 217, 255, 0.2);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-darker);
            min-height: 100vh;
            color: var(--text-primary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: var(--bg-dark);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 1rem;
        }

        .header-content {
            max-width: 1600px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.75rem;
        }

        .logo {
            font-size: 1.1rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nav {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .nav a {
            color: var(--text-secondary);
            text-decoration: none;
            padding: 0.4rem 0.6rem;
            border-radius: 6px;
            font-size: 0.8rem;
            transition: all 0.2s;
        }

        .nav a:hover, .nav a.active {
            color: var(--primary);
            background: rgba(0, 217, 255, 0.1);
        }

        .toolbar {
            background: var(--bg-dark);
            border-bottom: 1px solid var(--border);
            padding: 0.75rem 1rem;
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .tool-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            padding-right: 1rem;
            border-right: 1px solid var(--border);
        }

        .tool-group:last-child {
            border-right: none;
        }

        .tool-btn {
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.5rem 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 40px;
        }

        .tool-btn:hover {
            border-color: var(--primary);
        }

        .tool-btn.active {
            background: var(--primary);
            color: var(--bg-darker);
            border-color: var(--primary);
        }

        .tool-btn.danger {
            color: #EF4444;
            border-color: rgba(239, 68, 68, 0.3);
        }

        .tool-btn.danger:hover {
            background: rgba(239, 68, 68, 0.2);
        }

        input[type="color"] {
            width: 40px;
            height: 36px;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-card);
            cursor: pointer;
            padding: 2px;
        }

        input[type="range"] {
            width: 100px;
            accent-color: var(--primary);
        }

        .size-label {
            font-size: 0.75rem;
            color: var(--text-muted);
            min-width: 24px;
        }

        .canvas-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        canvas {
            display: block;
            cursor: crosshair;
            background: #FFFFFF;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
            }

            .nav {
                justify-content: center;
            }

            .toolbar {
                justify-content: center;
            }

            .tool-group {
                padding-right: 0.5rem;
                border-right: none;
            }

            input[type="range"] {
                width: 80px;
            }
        }

        @media (max-width: 480px) {
            .tool-btn {
                padding: 0.4rem 0.6rem;
                font-size: 0.9rem;
                min-width: 36px;
            }

            input[type="range"] {
                width: 60px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="logo">üé® Whiteboard</div>
            <button class="mobile-nav-toggle" onclick="toggleMobileNav()">‚ò∞ Menu</button>
            <nav class="nav">
                <a href="/">Home</a>
                <a href="/courses">Courses</a>
                <a href="/dashboard">Dashboard</a>
                <a href="/playground">Playground</a>
                <a href="/whiteboard" class="active">Whiteboard</a>
            </nav>
        </div>
    </header>

    <div class="toolbar">
        <div class="tool-group">
            <button class="tool-btn active" id="penBtn" title="Pen">‚úèÔ∏è</button>
            <button class="tool-btn" id="eraserBtn" title="Eraser">üßπ</button>
        </div>
        <div class="tool-group">
            <input type="color" id="colorPicker" value="#00D9FF" title="Color">
        </div>
        <div class="tool-group">
            <span class="size-label" id="sizeLabel">3</span>
            <input type="range" id="sizeSlider" min="1" max="30" value="3" title="Brush Size">
        </div>
        <div class="tool-group">
            <button class="tool-btn" id="undoBtn" title="Undo">‚Ü©Ô∏è</button>
            <button class="tool-btn danger" id="clearBtn" title="Clear All">üóëÔ∏è</button>
        </div>
        <div class="tool-group">
            <button class="tool-btn" id="saveBtn" title="Save as Image">üíæ</button>
        </div>
    </div>

    <div class="canvas-container">
        <canvas id="canvas"></canvas>
    </div>

    <script>
        function toggleMobileNav() {
            const nav = document.querySelector('.nav');
            nav.classList.toggle('active');
        }
        
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const container = document.querySelector('.canvas-container');

        let isDrawing = false;
        let currentTool = 'pen';
        let currentColor = '#00D9FF';
        let currentSize = 3;
        let history = [];
        let lastX = 0;
        let lastY = 0;

        // Set canvas size
        function resizeCanvas() {
            const rect = container.getBoundingClientRect();
            const imageData = history.length > 0 ? ctx.getImageData(0, 0, canvas.width, canvas.height) : null;
            canvas.width = rect.width;
            canvas.height = rect.height;
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            if (imageData) {
                ctx.putImageData(imageData, 0, 0);
            }
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Save state for undo
        function saveState() {
            if (history.length > 20) history.shift(); // Limit history
            history.push(canvas.toDataURL());
        }

        // Tool buttons
        document.getElementById('penBtn').addEventListener('click', () => {
            currentTool = 'pen';
            document.getElementById('penBtn').classList.add('active');
            document.getElementById('eraserBtn').classList.remove('active');
            canvas.style.cursor = 'crosshair';
        });

        document.getElementById('eraserBtn').addEventListener('click', () => {
            currentTool = 'eraser';
            document.getElementById('eraserBtn').classList.add('active');
            document.getElementById('penBtn').classList.remove('active');
            canvas.style.cursor = 'cell';
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            saveState();
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        document.getElementById('undoBtn').addEventListener('click', () => {
            if (history.length > 0) {
                const img = new Image();
                img.onload = () => {
                    ctx.fillStyle = '#FFFFFF';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.drawImage(img, 0, 0);
                };
                img.src = history.pop();
            }
        });

        document.getElementById('saveBtn').addEventListener('click', () => {
            const link = document.createElement('a');
            link.download = 'trendtactics-whiteboard.png';
            link.href = canvas.toDataURL();
            link.click();
        });

        document.getElementById('colorPicker').addEventListener('change', (e) => {
            currentColor = e.target.value;
        });

        document.getElementById('sizeSlider').addEventListener('input', (e) => {
            currentSize = parseInt(e.target.value);
            document.getElementById('sizeLabel').textContent = currentSize;
        });

        // Get position for both mouse and touch
        function getPosition(e) {
            const rect = canvas.getBoundingClientRect();
            if (e.touches) {
                return {
                    x: e.touches[0].clientX - rect.left,
                    y: e.touches[0].clientY - rect.top
                };
            }
            return {
                x: e.clientX - rect.left,
                y: e.clientY - rect.top
            };
        }

        // Drawing functions
        function startDrawing(e) {
            e.preventDefault();
            saveState();
            isDrawing = true;
            const pos = getPosition(e);
            lastX = pos.x;
            lastY = pos.y;
            ctx.beginPath();
            ctx.moveTo(lastX, lastY);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();

            const pos = getPosition(e);

            ctx.lineWidth = currentSize;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';

            if (currentTool === 'pen') {
                ctx.strokeStyle = currentColor;
            } else {
                ctx.strokeStyle = '#FFFFFF';
            }

            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function stopDrawing() {
            isDrawing = false;
            ctx.beginPath();
        }

        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        // Touch events for mobile
        canvas.addEventListener('touchstart', startDrawing, { passive: false });
        canvas.addEventListener('touchmove', draw, { passive: false });
        canvas.addEventListener('touchend', stopDrawing);
        canvas.addEventListener('touchcancel', stopDrawing);

        // Initialize white background
        ctx.fillStyle = '#FFFFFF';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
    </script>
</body>
</html>
