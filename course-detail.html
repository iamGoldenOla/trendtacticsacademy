<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vibe Coding - Trendtactics Academy</title>
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://cdnjs.cloudflare.com https://fonts.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://cdn.jsdelivr.net https://js.puter.com https://www.youtube.com https://s.ytimg.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com https://*.googleapis.com https://*.google-analytics.com https://*.googletagmanager.com https://uimdbodamoeyukrghchb.supabase.co https://*.supabase.co https://supabase.co; connect-src 'self' https://uimdbodamoeyukrghchb.supabase.co https://*.supabase.co https://supabase.co wss://*.supabase.co https://www.youtube.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com https://app.supabase.com https://supabase.com; img-src 'self' data: https: http:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; frame-src 'self' https://www.youtube.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com; child-src 'self' https://www.youtube.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com;">
    <link rel="stylesheet" href="css/main.css">
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
    <script>
        // Supabase configuration - these should be replaced during deployment
        window.__ENV__ = {
            SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpbWRib2RhbW9leXVrcmdoY2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NTYwMzksImV4cCI6MjA4MTAzMjAzOX0.kMFpnaZN04ac94u0wcXJFsS58lX88h8RCM2de3rwYIc'
        };
    </script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-content">
            <div class="logo">Trendtactics Academy</div>
            <button class="mobile-nav-toggle" onclick="toggleMobileNav()">☰ Menu</button>
            <nav class="nav">
                <a href="/">Home</a>
                <a href="/about">About</a>
                <a href="/services">Services</a>
                <a href="/courses">Courses</a>
                <a href="/blog">Blog</a>
                <a href="https://trendtacticsdigital.com" target="_blank">Digital Services</a>
                <a href="/contact">Contact</a>
                <button class="btn btn-secondary" id="authBtn" onclick="handleAuthClick()">Sign In</button>
                <a href="/dashboard" id="dashboardLink" style="display: none; margin-left: 1rem; color: var(--primary); text-decoration: none;">Dashboard</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding: 3rem 0;">
        <!-- Course Hero -->
        <div class="hero">
            <span class="badge badge-primary">Beginner Friendly</span>
            <h1 class="hero-title">Vibe Coding: Building Real Software with AI</h1>
            <p class="hero-subtitle">The modern way of building software where humans focus on intent, systems, and outcomes while AI handles execution.</p>
        </div>

        <!-- YouTube Video Section -->
        <div class="card" style="margin-bottom: 2rem;">
            <h2 class="card-title" style="text-align: center; margin-bottom: 1.5rem;">Watch: What is Vibe Coding?</h2>
            <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: var(--radius);">
                <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;" src="https://www.youtube.com/embed/jVMf5gqS8P8" title="What is Vibe Coding? - Introduction" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
            <p style="text-align: center; color: var(--text-secondary); margin-top: 1rem; font-size: 0.9rem;">Learn how Vibe Coding is transforming the way software is built in 2025</p>
        </div>

        <!-- Course Info Grid -->
        <div class="grid grid-2" style="margin-bottom: 3rem;">
            <!-- Course Details Card -->
            <div class="card">
                <h2 class="card-title">Course Overview</h2>
                <p class="card-description">
                    Vibe Coding is the modern way of building software where humans focus on intent, systems, and outcomes while AI handles execution. Learn how real products are built in 2025 using AI-powered builders, IDEs, and autonomous agents.
                </p>

                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem; font-size: 1.25rem;">What You'll Learn</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">1.</span> Master the Vibe Coding ecosystem and mindset
                        </li>
                        <li style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">2.</span> Build full-stack apps with AI-first tools (Bolt, Lovable, Replit)
                        </li>
                        <li style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">3.</span> Use AI-first IDEs like Cursor, Windsurf, and Qoder
                        </li>
                        <li style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">4.</span> Deploy real projects using Vercel, Netlify, and Supabase
                        </li>
                        <li style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">5.</span> Master prompt engineering for software development
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Enrollment Card -->
            <div class="card" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); border: none;">
                <h2 class="card-title" style="color: white;">Ready to Start?</h2>
                <p style="color: rgba(255,255,255,0.9); margin-bottom: 2rem;">
                    Join thousands of learners and begin your journey to building real software with AI.
                </p>

                <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Duration</span>
                        <span style="color: white; font-weight: 600;">4-6 weeks</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Modules</span>
                        <span style="color: white; font-weight: 600;">8 Modules</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Lessons</span>
                        <span style="color: white; font-weight: 600;">14 Lessons</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Level</span>
                        <span style="color: white; font-weight: 600;">Beginner</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: rgba(255,255,255,0.9);">Price</span>
                        <div style="text-align: right;">
                            <span style="color: white; font-weight: 600; font-size: 1.5rem;">$3</span>
                            <span style="color: rgba(255,255,255,0.7); font-size: 0.9rem; display: block;">or N5,000</span>
                        </div>
                    </div>
                </div>

                <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-lg" id="enrollBtn" onclick="handlePurchase()" style="flex: 1; min-width: 120px; background: rgba(255,255,255,0.2); color: white; border: 2px solid white;">
                        <span id="enrollBtnText">Buy Now</span>
                    </button>
                </div>

                <div id="enrollMessage" style="margin-top: 1rem; padding: 1rem; border-radius: var(--radius); display: none;"></div>
            </div>
        </div>

        <!-- Course Modules -->
        <div class="card">
            <h2 class="card-title">Course Structure: 8 Modules</h2>
            <p style="color: var(--text-secondary); margin-bottom: 2rem;">A comprehensive curriculum taking you from Vibe Coding foundations to building real-world projects.</p>
            <div style="margin-top: 2rem;">
                <!-- Module 1 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 1: Vibe Coding Foundations</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Understand what Vibe Coding is and why it matters</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>What is Vibe Coding?</li>
                        <li>Why Vibe Coding is the Future</li>
                    </ul>
                </div>
                <!-- Module 2 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 2: The Vibe Coding Ecosystem</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Explore the tools and platforms powering modern software</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Overview of Vibe Coding Tools</li>
                        <li>AI-First Development Workflow</li>
                    </ul>
                </div>
                <!-- Module 3 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 3: Full-Stack AI Builders</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Build complete apps with Bolt.new, Lovable, Replit Agent</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Bolt.new and Lovable Deep Dive</li>
                        <li>Replit Agent and V0 Walkthrough</li>
                    </ul>
                </div>
                <!-- Module 4 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 4: AI-First IDEs</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Master Cursor, Windsurf, and Qoder for AI-assisted coding</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Cursor IDE Mastery</li>
                        <li>Windsurf, Qoder, and Other AI IDEs</li>
                    </ul>
                </div>
                <!-- Module 5 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 5: Agentic Coding Tools</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Work with autonomous AI agents that complete tasks</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Devin, OpenHands, and Claude Computer Use</li>
                        <li>Real-World Agentic Workflows</li>
                    </ul>
                </div>
                <!-- Module 6 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 6: Real-World Workflows</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">1 lesson | Deploy and iterate on live projects</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>From Prototype to Production with Vercel and Supabase</li>
                    </ul>
                </div>
                <!-- Module 7 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 7: Prompting for Software</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Write effective prompts for code generation</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Prompt Engineering for Code</li>
                        <li>Advanced Prompting Strategies</li>
                    </ul>
                </div>
                <!-- Module 8 -->
                <div class="module-card" style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); cursor: pointer; transition: all 0.2s; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 8: The Future of Vibe Coding</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">1 lesson | Where software development is headed</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>AI-First Careers and Emerging Tools</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <!-- Scripts -->
    <script src="js/supabase-client.js"></script>
    <script src="js/auth.js"></script>
    <script>
        const COURSE_TITLE = 'Vibe Coding: Building Real Software with AI'; // Use full course title to find the correct ID

        // Check auth status on load
        async function initPage() {
            try {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);
                
                const authBtn = document.getElementById('authBtn');
                const dashboardLink = document.getElementById('dashboardLink');

                if (loggedIn) {
                    const user = JSON.parse(u)?.user;
                    if (authBtn) {
                        authBtn.textContent = user?.user_metadata?.name || user?.email || 'Account';
                        authBtn.onclick = () => window.location.href = '/dashboard';
                    }
                    if (dashboardLink) {
                        dashboardLink.style.display = 'block';
                    }

                    // Check if already enrolled
                    await checkEnrollment();
                } else {
                    if (authBtn) {
                        authBtn.textContent = 'Sign In';
                        authBtn.onclick = () => window.location.href = '/signup';
                    }
                    if (dashboardLink) {
                        dashboardLink.style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Auth initialization error:', error);
                // Continue without auth functionality if there's an error
                const authBtn = document.getElementById('authBtn');
                const dashboardLink = document.getElementById('dashboardLink');
                
                if (authBtn) {
                    authBtn.textContent = 'Sign In';
                    authBtn.onclick = () => window.location.href = '/signup';
                }
                if (dashboardLink) {
                    dashboardLink.style.display = 'none';
                }
            }
        }

        // Check if user has access to this course
        async function checkEnrollment() {
            try {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);
                
                if (!loggedIn) return;
                
                const user = JSON.parse(u)?.user;
                if (!user) return;

                // First, get the course ID by title
                const courseResponse = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/courses?title=' + encodeURIComponent(COURSE_TITLE));
                let courseId = null;
                
                if (courseResponse.ok) {
                    const courseData = await courseResponse.json();
                    if (courseData && courseData.id) {
                        courseId = courseData.id;
                    }
                }
                
                if (!courseId) {
                    // Fallback to a known course ID if the API call fails
                    courseId = 'e9e58e4a-2f3b-4c9a-8a3d-1e5f6a7b8c9d';
                }
                
                const session = JSON.parse(s);
                const token = session?.access_token || session?.session?.access_token;
                
                // Check if user has access to this course
                const response = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/get-student-courses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        user_id: user.id
                    })
                });

                if (!response.ok) {
                    throw new Error(`Failed to check enrollment: ${response.status}`);
                }

                const data = await response.json();
                const courses = data.courses || [];
                const hasAccess = courses.some(course => course.course_id === courseId);

                if (hasAccess) {
                    const enrollBtn = document.getElementById('enrollBtn');
                    const enrollBtnText = document.getElementById('enrollBtnText');
                    if (enrollBtnText) {
                        enrollBtnText.textContent = 'Continue Learning';
                    }
                    if (enrollBtn) {
                        enrollBtn.onclick = () => window.location.href = '/lesson-viewer?course=' + courseId;
                        
                        // Change button style to indicate enrolled status
                        enrollBtn.style.background = 'white';
                        enrollBtn.style.color = 'var(--primary)';
                    }
                }
            } catch (error) {
                console.log('Error checking enrollment:', error);
            }
        }

        // Handle auth button click
        function handleAuthClick() {
            // Check if user is logged in by checking for session and user data
            const s = localStorage.getItem('supabase_session');
            const u = localStorage.getItem('supabase_user');
            const loggedIn = !!(s && u);
            
            if (loggedIn) {
                // If logged in, go to dashboard
                window.location.href = '/dashboard';
            } else {
                // If not logged in, go to signup/login
                window.location.href = '/signup';
            }
        }

        // Handle view course - check enrollment first
        async function handleViewCourse() {
            try {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);
                
                if (!loggedIn) {
                    window.location.href = '/signup';
                    return;
                }
                
                const user = JSON.parse(u)?.user;
                if (!user) {
                    window.location.href = '/signup';
                    return;
                }

                // Get the course ID by title
                let courseId = null;
                try {
                    const courseResponse = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/courses?title=' + encodeURIComponent(COURSE_TITLE));
                    
                    if (courseResponse.ok) {
                        const courseData = await courseResponse.json();
                        if (courseData && courseData.id) {
                            courseId = courseData.id;
                        }
                    }
                } catch (error) {
                    console.error('Error fetching course ID:', error);
                }
                
                if (!courseId) {
                    // Fallback to a known course ID if the API call fails
                    courseId = 'e9e58e4a-2f3b-4c9a-8a3d-1e5f6a7b8c9d';
                }
                
                const session = JSON.parse(s);
                const token = session?.access_token || session?.session?.access_token;
                
                // Check if user has access to this course
                const response = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/get-student-courses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        user_id: user.id
                    })
                });

                if (!response.ok) {
                    throw new Error(`Failed to check enrollment: ${response.status}`);
                }

                const data = await response.json();
                const courses = data.courses || [];
                const hasAccess = courses.some(course => course.course_id === courseId);

                if (hasAccess) {
                    // User is enrolled, redirect to lesson viewer
                    window.location.href = '/lesson-viewer?course=' + courseId;
                } else {
                    // User is not enrolled, show message and redirect to signup
                    alert('You need to enroll in this course first to access the content.');
                    window.location.href = '/signup';
                }
            } catch (error) {
                console.error('Error checking enrollment:', error);
                alert('Error checking enrollment status. Please try again.');
            }
        }

        // Handle purchase - add course access via local API endpoint
        async function handlePurchase() {
            try {
                // Check if user is logged in
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);
                
                if (!loggedIn) {
                    alert("Please log in to enroll");
                    window.location.href = '/signup';
                    return;
                }

                // Parse user data
                const user = JSON.parse(u)?.user;
                if (!user || !user.id) {
                    throw new Error('Invalid user session');
                }

                // Get the course ID by title first
                let courseId = null;
                try {
                    const courseResponse = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/courses?title=' + encodeURIComponent(COURSE_TITLE));
                    
                    if (courseResponse.ok) {
                        const courseData = await courseResponse.json();
                        if (courseData && courseData.id) {
                            courseId = courseData.id;
                        }
                    }
                } catch (error) {
                    console.error('Error fetching course ID:', error);
                }
                
                if (!courseId) {
                    // Fallback to a known course ID
                    courseId = 'e9e58e4a-2f3b-4c9a-8a3d-1e5f6a7b8c9d';
                }
                
                // Get auth token
                const session = JSON.parse(s);
                const token = session?.access_token || session?.session?.access_token;
                
                if (!token) {
                    throw new Error('No auth token found');
                }

                // Call local PHP endpoint instead of Supabase directly
                // This bypasses all CSP restrictions
                const res = await fetch(
                  "/api/enroll.php",
                  {
                    method: "POST",
                    headers: {
                      "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                      course_id: courseId,
                      user_id: user.id,
                      auth_token: token
                    })
                  }
                );

                const responseData = await res.json();
                
                if (!res.ok) {
                    throw new Error(responseData.error || 'Enrollment failed');
                }

                // Check if already enrolled
                if (responseData.already_enrolled) {
                    alert("You are already enrolled in this course!");
                    location.reload();
                    return;
                }

                alert("Enrollment successful! Redirecting to your course...");
                location.reload();
            } catch (err) {
                console.error("Enrollment error:", err);
                
                // Show error message
                const messageDiv = document.getElementById('enrollMessage');
                if (messageDiv) {
                    messageDiv.textContent = 'Error enrolling in course. Please try again. Details: ' + err.message;
                    messageDiv.style.background = 'rgba(239, 68, 68, 0.2)';
                    messageDiv.style.color = '#EF4444';
                    messageDiv.style.display = 'block';
                }
            }
        }

        // Initialize page
        function toggleMobileNav() {
            const nav = document.querySelector('.nav');
            nav.classList.toggle('active');
            
            // Update button text based on state
            const toggleBtn = document.querySelector('.mobile-nav-toggle');
            if (nav.classList.contains('active')) {
                toggleBtn.textContent = '✕ Close';
            } else {
                toggleBtn.textContent = '☰ Menu';
            }
        }
        
        // Close navigation when clicking outside on mobile
        document.addEventListener('click', function(event) {
            const nav = document.querySelector('.nav');
            const toggleBtn = document.querySelector('.mobile-nav-toggle');
            
            if (window.innerWidth <= 768 && 
                nav.classList.contains('active') && 
                !nav.contains(event.target) && 
                event.target !== toggleBtn) {
                nav.classList.remove('active');
                toggleBtn.textContent = '☰ Menu';
            }
        });
        
        initPage();
        
        // Add click handlers to module cards
        document.querySelectorAll('.module-card').forEach((card, index) => {
            card.addEventListener('click', () => {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);
                
                if (loggedIn) {
                    // Navigate to the first lesson of the module
                    // For now, redirect to the dashboard where lessons will be accessible
                    window.location.href = '/dashboard';
                } else {
                    // If not logged in, redirect to signup
                    window.location.href = '/signup';
                }
            });
            
            // Add hover effect
            card.addEventListener('mouseenter', () => {
                card.style.background = 'var(--bg-secondary)';
                card.style.transform = 'translateY(-2px)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.background = 'var(--bg-tertiary)';
                card.style.transform = 'translateY(0)';
            });
        });
    </script>
</body>

</html>