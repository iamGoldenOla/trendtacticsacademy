-- ==========================================
-- VIBE CODING MODULE 3 - ALL 3 LESSONS
-- The Core Vibe Coding Workflow
-- Compact formatting
-- ==========================================

DO $$
DECLARE
    v_course_id UUID;
    v_module_id UUID;
BEGIN
    SELECT id INTO v_course_id FROM courses WHERE title ILIKE '%Vibe Coding%' LIMIT 1;
    IF v_course_id IS NULL THEN RAISE EXCEPTION 'Vibe Coding course not found'; END IF;
    
    SELECT id INTO v_module_id FROM modules WHERE course_id = v_course_id AND ordering = 3 LIMIT 1;
    IF v_module_id IS NULL THEN RAISE EXCEPTION 'Module 3 not found'; END IF;
    
    RAISE NOTICE 'ðŸ“š Expanding Vibe Coding Module 3...';
    
    -- LESSON 8: System Prompts vs User Prompts
    UPDATE lessons SET content = '<div class="lesson-content"><h2>System Prompts vs User Prompts</h2><h3>Understanding the Two Types of Prompts</h3><p>When working with AI, there are two fundamental types of prompts that shape how AI responds: <strong>system prompts</strong> and <strong>user prompts</strong>. Understanding the difference between themâ€”and how to use each effectivelyâ€”will dramatically improve your Vibe Coding results.</p><p>This lesson breaks down what each type does, when to use them, and how to craft prompts that get you exactly what you need.</p><h3>What Are System Prompts?</h3><p>System prompts are <strong>instructions that set the AI''s behavior, role, and constraints</strong> for an entire conversation or session. They''re like giving AI a job description before it starts working.</p><p>Think of system prompts as the "operating instructions" for AI. They define who the AI is, what it should prioritize, how it should respond, what constraints it should follow, and what style or tone to use.</p><h4>Examples of System Prompts</h4><p>"You are an expert React developer who writes clean, modern code using functional components and hooks. Always use TypeScript. Prioritize accessibility and performance."</p><p>"You are a helpful coding tutor. Explain concepts clearly for beginners. Use analogies and examples. Never just give answersâ€”guide users to understand the solution."</p><p>"You are a senior full-stack engineer building production-ready code. Focus on security, scalability, and maintainability. Include error handling and edge cases."</p><h3>What Are User Prompts?</h3><p>User prompts are <strong>specific requests or questions you ask during a conversation</strong>. They''re the actual tasks you want AI to complete.</p><p>User prompts are the "what" you want done, while system prompts are the "how" it should be done.</p><h4>Examples of User Prompts</h4><p>"Create a login form with email and password fields"</p><p>"Explain how useState works in React"</p><p>"Debug this functionâ€”it''s not returning the expected results"</p><h3>How They Work Together</h3><p>System prompts and user prompts work in tandem. The system prompt sets the context and behavior, while user prompts provide specific tasks.</p><p><strong>Example Interaction:</strong></p><p>System Prompt: "You are a senior React developer who writes production-ready code with TypeScript, proper error handling, and accessibility features."</p><p>User Prompt: "Create a button component"</p><p>Result: AI generates a TypeScript button component with proper types, ARIA labels, error states, and follows React best practices.</p><p>Same User Prompt with Different System Prompt: "You are helping a beginner learn React basics. Keep code simple and well-commented."</p><p>Result: AI generates a simple JavaScript button with detailed comments explaining each part.</p><h3>Why System Prompts Matter in Vibe Coding</h3><p>System prompts are powerful because they set consistent behavior across an entire project. They save you from repeating the same instructions in every user prompt. They ensure AI maintains your preferred style and standards. They help AI make better decisions when you give it flexibility.</p><h4>Without a System Prompt</h4><p>User Prompt: "Create a user profile component"</p><p>AI might use class components or functional components, JavaScript or TypeScript, inline styles or CSS modules, any state management approach, inconsistent naming conventions.</p><h4>With a System Prompt</h4><p>System Prompt: "You are building a Next.js app with TypeScript, Tailwind CSS, and Zustand for state management. Use functional components with hooks. Follow the project''s existing patterns."</p><p>User Prompt: "Create a user profile component"</p><p>AI generates code that matches your tech stack, follows your conventions, and integrates smoothly with existing code.</p><h3>Crafting Effective System Prompts</h3><h4>1. Define the Role</h4><p>Tell AI what kind of developer or expert it should be: "You are a senior full-stack developer", "You are a React specialist", "You are a backend API expert"</p><h4>2. Specify the Tech Stack</h4><p>List the technologies and frameworks you''re using: "We''re building with Next.js 14, TypeScript, Tailwind CSS, and Supabase", "This is a vanilla JavaScript project with no frameworks"</p><h4>3. Set Quality Standards</h4><p>Define what "good code" means for your project: "Prioritize readability over cleverness", "Include comprehensive error handling", "Write code that junior developers can maintain", "Focus on performance and optimization"</p><h4>4. Establish Constraints</h4><p>Set boundaries and requirements: "Keep bundle size minimalâ€”avoid heavy dependencies", "Must work on IE11", "Follow WCAG AA accessibility standards", "Use functional programming patterns"</p><h4>5. Define Communication Style</h4><p>How should AI explain things? "Explain your decisions briefly", "Provide detailed comments in the code", "Keep responses conciseâ€”code only, minimal explanation"</p><h3>Example System Prompts for Different Scenarios</h3><p><strong>For Learning:</strong> "You are a patient coding instructor teaching web development to beginners. Explain concepts using simple analogies. Break down complex ideas into small steps. Encourage questions and experimentation."</p><p><strong>For Production Work:</strong> "You are a senior engineer building production-grade software. Write clean, maintainable code with proper error handling, logging, and security considerations. Include unit tests. Follow SOLID principles."</p><p><strong>For Rapid Prototyping:</strong> "You are helping build an MVP quickly. Prioritize speed and functionality over perfection. Use proven libraries and frameworks. Keep code simple and easy to modify later."</p><p><strong>For Specific Framework:</strong> "You are a Vue.js 3 expert using the Composition API. Always use <script setup> syntax. Prefer composables over mixins. Use TypeScript for type safety. Follow Vue.js style guide recommendations."</p><h3>Crafting Effective User Prompts</h3><p>While system prompts set the stage, user prompts drive the action. Here''s how to make them effective:</p><h4>1. Be Specific About the Goal</h4><p>Vague: "Make a form"<br>Better: "Create a contact form with fields for name, email, and message. Include validation and a submit button."</p><h4>2. Provide Context</h4><p>Vague: "Add authentication"<br>Better: "Add email/password authentication using Supabase Auth. Include signup, login, and logout functionality. Store user session in local storage."</p><h4>3. Specify Desired Behavior</h4><p>Vague: "Fix the bug"<br>Better: "The search function returns no results when the query has special characters. Fix it to handle special characters properly and return relevant results."</p><h4>4. Include Examples When Helpful</h4><p>"Create a pricing card component similar to Stripe''s pricing pageâ€”clean design, feature list, prominent CTA button."</p><h3>Common Mistakes and How to Avoid Them</h3><p><strong>Mistake 1: Conflicting Instructions</strong><br>System Prompt: "Keep code simple for beginners"<br>User Prompt: "Use advanced TypeScript generics and higher-order functions"<br>Solution: Ensure system and user prompts align.</p><p><strong>Mistake 2: Overly Restrictive System Prompts</strong><br>"You must only use vanilla JavaScript, no libraries, no frameworks, no external dependencies whatsoever"<br>Solution: Be specific but allow flexibility where appropriate.</p><p><strong>Mistake 3: Vague User Prompts Relying on System Prompt</strong><br>Assuming the system prompt will fill in all the details.<br>Solution: User prompts should still be specific about what you want.</p><p><strong>Mistake 4: Changing System Behavior Mid-Conversation</strong><br>Starting with one system prompt, then contradicting it later.<br>Solution: Start a new conversation when you need different behavior.</p><h3>Advanced: Dynamic System Prompts</h3><p>For complex projects, you might use different system prompts for different phases:</p><p><strong>Planning Phase:</strong> "You are a software architect helping design system architecture. Focus on high-level design, data flow, and component structure. Don''t write code yetâ€”just plan."</p><p><strong>Implementation Phase:</strong> "You are implementing the planned architecture. Write production-ready code following the design we discussed. Reference the architecture document."</p><p><strong>Debugging Phase:</strong> "You are debugging existing code. Analyze issues systematically. Explain what''s wrong and why. Provide fixes with clear explanations."</p><h3>Tools That Use System Prompts</h3><p>Different AI tools handle system prompts differently:</p><p><strong>ChatGPT:</strong> You can set custom instructions in settings that act as a persistent system prompt.</p><p><strong>Claude:</strong> Supports system prompts in the API; in the web interface, include them at the start of conversations.</p><p><strong>Cursor/IDEs:</strong> Often have project-level instructions that function as system prompts.</p><p><strong>API Usage:</strong> Most AI APIs have explicit system prompt parameters.</p><h3>Practical Workflow: Setting Up Your Session</h3><p>Here''s a recommended workflow for starting a Vibe Coding session:</p><p>Step 1: Define Your System Prompt - Write out the role, tech stack, standards, and constraints for this project.</p><p>Step 2: Start Your Session - Provide the system prompt at the beginning of your conversation (or set it in your tool''s settings).</p><p>Step 3: Give Specific User Prompts - Make requests that build on the system context.</p><p>Step 4: Maintain Consistency - Keep the same system prompt throughout related work.</p><p>Step 5: Start Fresh When Needed - Begin a new session with a new system prompt when switching contexts.</p><h3>Example: Complete Session Setup</h3><p><strong>System Prompt:</strong> "You are building a task management SaaS with Next.js 14, TypeScript, Tailwind CSS, and Supabase. The target users are small teams. Prioritize clean, maintainable code with good UX. Use server components where possible. Include proper error handling and loading states."</p><p><strong>User Prompt 1:</strong> "Create the main dashboard layout with a sidebar for navigation and a main content area."</p><p><strong>User Prompt 2:</strong> "Add a task list component that fetches tasks from Supabase and displays them in cards."</p><p><strong>User Prompt 3:</strong> "Implement task creation with a modal form. Include fields for title, description, due date, and priority."</p><p>Notice how each user prompt is specific, but doesn''t need to repeat the tech stack or standardsâ€”the system prompt handles that.</p><h3>Key Takeaways</h3><ul><li><strong>System prompts</strong> set AI''s role, behavior, and constraints for an entire session</li><li><strong>User prompts</strong> are specific requests or tasks within that context</li><li>System prompts ensure <strong>consistency</strong> across your project</li><li>Effective system prompts define <strong>role, tech stack, quality standards, constraints, and communication style</strong></li><li>User prompts should be <strong>specific and contextual</strong> but don''t need to repeat system-level details</li><li>Start <strong>fresh sessions</strong> when you need different AI behavior</li><li>Align system and user prompts to avoid conflicting instructions</li></ul><p>In the next lesson, we''ll explore the Vibe Coding Loopâ€”the iterative process you''ll use to build features from start to finish.</p></div>'
    WHERE module_id = v_module_id AND ordering = 1;
    RAISE NOTICE 'âœ… Lesson 8 Complete';
    
    RAISE NOTICE 'ðŸŽ‰ Module 3 Lesson 1 Complete!';
    
END $$;
