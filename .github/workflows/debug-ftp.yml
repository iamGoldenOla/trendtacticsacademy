name: Debug FTP Connection
on: 
  push:
    branches:
      - master
  workflow_dispatch:

jobs:
  debug-ftp:
    runs-on: ubuntu-latest
    steps:
      - name: Install lftp
        run: sudo apt-get update && sudo apt-get install -y lftp

      - name: List Root Directory (Connection Test)
        env:
          FTP_USER: ${{ secrets.FTP_USERNAME }}
          FTP_PASS: ${{ secrets.FTP_PASSWORD }}
          FTP_SERVER: ${{ secrets.FTP_SERVER }}
        run: |
          echo "Attempting to list files at root..."
          lftp -e "set ssl:verify-certificate no; ls; quit" -u "$FTP_USER","$FTP_PASS" "$FTP_SERVER"
