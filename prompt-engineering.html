<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Engineering Mastery - Trendtactics Academy</title>
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://cdnjs.cloudflare.com https://fonts.googleapis.com https://www.googletagmanager.com https://www.google-analytics.com https://cdn.jsdelivr.net https://js.puter.com https://www.youtube.com https://s.ytimg.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com https://*.googleapis.com https://*.google-analytics.com https://*.googletagmanager.com https://uimdbodamoeyukrghchb.supabase.co https://*.supabase.co https://supabase.co; connect-src 'self' https://uimdbodamoeyukrghchb.supabase.co https://*.supabase.co https://supabase.co wss://*.supabase.co https://www.youtube.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com https://app.supabase.com https://supabase.com; img-src 'self' data: https: http:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com https://*.googleapis.com; font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com; frame-src 'self' https://www.youtube.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com; child-src 'self' https://www.youtube.com https://*.youtube.com https://youtube-nocookie.com https://*.youtube-nocookie.com;">
    <link rel="stylesheet" href="css/main.css">
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%2300D9FF%22 width=%22100%22 height=%22100%22 rx=%2215%22/><text x=%2250%22 y=%2265%22 font-size=%2250%22 fill=%22white%22 text-anchor=%22middle%22 font-weight=%22bold%22>TA</text></svg>"
        type="image/svg+xml">
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.3/dist/umd/supabase.js"></script>
    <script>
        window.__ENV__ = {
            SUPABASE_ANON_KEY: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVpbWRib2RhbW9leXVrcmdoY2hiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU0NTYwMzksImV4cCI6MjA4MTAzMjAzOX0.kMFpnaZN04ac94u0wcXJFsS58lX88h8RCM2de3rwYIc'
        };
    </script>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-content">
            <div class="logo">Trendtactics Academy</div>
            <button class="mobile-nav-toggle" onclick="toggleMobileNav()">☰ Menu</button>
            <nav class="nav">
                <a href="/">Home</a>
                <a href="/about">About</a>
                <a href="/services">Services</a>
                <a href="/courses">Courses</a>
                <a href="/blog">Blog</a>
                <a href="https://trendtacticsdigital.com" target="_blank">Digital Services</a>
                <a href="/contact">Contact</a>
                <button class="btn btn-secondary" id="authBtn" onclick="handleAuthClick()">Sign In</button>
                <a href="/dashboard" id="dashboardLink"
                    style="display: none; margin-left: 1rem; color: var(--primary); text-decoration: none;">Dashboard</a>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container" style="padding: 3rem 0;">
        <!-- Course Hero -->
        <div class="hero">
            <span class="badge badge-primary">Beginner Friendly</span>
            <h1 class="hero-title">Prompt Engineering Mastery</h1>
            <p class="hero-subtitle">Master the skill of controlling AI behavior through language, structure,
                constraints, and context.</p>
        </div>

        <!-- YouTube Video Section -->
        <div class="card" style="margin-bottom: 2rem;">
            <h2 class="card-title" style="text-align: center; margin-bottom: 1.5rem;">Watch: Introduction to Prompt
                Engineering</h2>
            <div
                style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: var(--radius);">
                <iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;"
                    src="https://www.youtube.com/embed/jC4v5AS4RIM" title="Introduction to Prompt Engineering"
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                    allowfullscreen></iframe>
            </div>
            <p style="text-align: center; color: var(--text-secondary); margin-top: 1rem; font-size: 0.9rem;">Learn why
                prompt engineering is the most valuable AI skill in 2025</p>
        </div>

        <!-- Course Info Grid -->
        <div class="grid grid-2" style="margin-bottom: 3rem;">
            <!-- Course Details Card -->
            <div class="card">
                <h2 class="card-title">Course Overview</h2>
                <p class="card-description">
                    Prompt Engineering is the skill of controlling AI behavior through language, structure, constraints,
                    and context. This course teaches how AI actually interprets instructions, how to design prompts that
                    scale across tools and teams, and how to move from trial-and-error prompting to reliable, reusable
                    AI systems.
                </p>
                <p class="card-description" style="margin-top: 1rem; font-style: italic; color: var(--primary);">
                    This is not a copywriting course and not prompt tricks. It is a systems-thinking discipline.
                </p>

                <div style="margin-top: 2rem;">
                    <h3 style="margin-bottom: 1rem; font-size: 1.25rem;">Who This Course Is For</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li
                            style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">1.</span>
                            Beginners who want clarity, not jargon
                        </li>
                        <li
                            style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">2.</span>
                            Professionals using AI daily but getting inconsistent results
                        </li>
                        <li
                            style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">3.</span>
                            Builders creating AI-powered products or workflows
                        </li>
                        <li
                            style="padding: 0.5rem 0; color: var(--text-secondary); display: flex; align-items: center;">
                            <span style="color: var(--primary); margin-right: 0.75rem; font-weight: bold;">4.</span>
                            Teams deploying AI across multiple tools
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Enrollment Card -->
            <div class="card"
                style="background: linear-gradient(135deg, var(--primary), var(--secondary)); border: none;">
                <h2 class="card-title" style="color: white;">Ready to Start?</h2>
                <p style="color: rgba(255,255,255,0.9); margin-bottom: 2rem;">
                    Transform how you communicate with AI and get consistent, high-quality results.
                </p>

                <div
                    style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: var(--radius); margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Duration</span>
                        <span style="color: white; font-weight: 600;">2-3 weeks</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Modules</span>
                        <span style="color: white; font-weight: 600;">7 Modules</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Lessons</span>
                        <span style="color: white; font-weight: 600;">16 Lessons</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 1rem;">
                        <span style="color: rgba(255,255,255,0.9);">Level</span>
                        <span style="color: white; font-weight: 600;">Beginner</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: rgba(255,255,255,0.9);">Price</span>
                        <div style="text-align: right;">
                            <span style="color: white; font-weight: 600; font-size: 1.5rem;">$3</span>
                            <span style="color: rgba(255,255,255,0.7); font-size: 0.9rem; display: block;">or
                                N5,000</span>
                        </div>
                    </div>
                </div>

                <button class="btn btn-lg" id="enrollBtn" onclick="handlePurchase()"
                    style="width: 100%; background: white; color: var(--primary);">
                    <span id="enrollBtnText">Buy Now</span>
                </button>

                <div id="enrollMessage"
                    style="margin-top: 1rem; padding: 1rem; border-radius: var(--radius); display: none;"></div>
            </div>
        </div>

        <!-- Course Modules -->
        <div class="card">
            <h2 class="card-title">Course Structure: 7 Modules, 16 Lessons</h2>
            <p style="color: var(--text-secondary); margin-bottom: 2rem;">A comprehensive curriculum from prompt
                fundamentals to advanced business applications.</p>
            <div style="margin-top: 2rem;">
                <!-- Module 1 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 1: Prompt
                        Engineering Foundations</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">3 lessons |
                        Understand how AI interprets instructions</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 1: What Prompt Engineering Really Is</li>
                        <li>Lesson 2: How AI Interprets Instructions</li>
                        <li>Lesson 3: Prompt Engineering vs Traditional Instructions</li>
                    </ul>
                </div>
                <!-- Module 2 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 2: Prompt
                        Structure and Control</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">3 lessons |
                        Master the components of effective prompts</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 4: Core Prompt Components (Role, Task, Constraints, Format)</li>
                        <li>Lesson 5: Context Layering (Global vs Local)</li>
                        <li>Lesson 6: Constraints and Guardrails</li>
                    </ul>
                </div>
                <!-- Module 3 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 3: Prompt
                        Patterns That Scale</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons |
                        Learn reusable patterns for consistent results</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 7: Reusable Prompt Patterns</li>
                        <li>Lesson 8: Multi-Step and Chained Prompts</li>
                    </ul>
                </div>
                <!-- Module 4 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 4: Prompt
                        Engineering for Builders</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons |
                        Apply prompts to code and systems</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 9: Prompting AI Tools vs AI Models</li>
                        <li>Lesson 10: Prompt Engineering for Code and Systems</li>
                    </ul>
                </div>
                <!-- Module 5 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 5: Debugging
                        and Improving Prompts</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons | Fix
                        and optimize your prompts</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 11: Why Prompts Fail</li>
                        <li>Lesson 12: Prompt Debugging Framework</li>
                    </ul>
                </div>
                <!-- Module 6 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 6: Prompt
                        Engineering for Business and Teams</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons |
                        Scale prompts across organizations</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 13: Prompting for Marketing and Ads</li>
                        <li>Lesson 14: Prompt Libraries and Team Use</li>
                    </ul>
                </div>
                <!-- Module 7 -->
                <div class="module-card"
                    style="padding: 1.5rem; background: var(--bg-tertiary); border-radius: var(--radius); border-left: 4px solid var(--primary);">
                    <h3 style="font-size: 1.125rem; margin-bottom: 0.5rem; color: var(--primary);">Module 7: Ethics,
                        Safety and Future-Proofing</h3>
                    <p style="color: var(--text-secondary); font-size: 0.875rem; margin-bottom: 0.5rem;">2 lessons |
                        Responsible AI communication</p>
                    <ul style="font-size: 0.8rem; color: var(--text-muted); list-style: none; padding: 0; margin: 0;">
                        <li>Lesson 15: Responsible Prompt Engineering</li>
                        <li>Lesson 16: The Future of Prompt Engineering</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- What You'll Learn Section -->
        <div class="card" style="margin-top: 2rem;">
            <h2 class="card-title">Skills You'll Master</h2>
            <div class="grid grid-3" style="margin-top: 1.5rem;">
                <div style="text-align: center; padding: 1.5rem;">
                    <div
                        style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" />
                        </svg>
                    </div>
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">AI Communication</h4>
                    <p style="color: var(--text-muted); font-size: 0.875rem;">Write prompts that get consistent,
                        high-quality results every time</p>
                </div>
                <div style="text-align: center; padding: 1.5rem;">
                    <div
                        style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" />
                            <path d="M9 9h6m-6 6h6m-6-3h6" />
                        </svg>
                    </div>
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Prompt Patterns</h4>
                    <p style="color: var(--text-muted); font-size: 0.875rem;">Build reusable prompt libraries that scale
                        across projects</p>
                </div>
                <div style="text-align: center; padding: 1.5rem;">
                    <div
                        style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--primary-dark)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                            <circle cx="12" cy="12" r="3" />
                            <path
                                d="M12 2v2m0 16v2M2 12h2m16 0h2m-4.2-5.8l1.4-1.4M4.8 19.2l1.4-1.4m12 0l1.4 1.4M4.8 4.8l1.4 1.4" />
                        </svg>
                    </div>
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">Debug and Optimize</h4>
                    <p style="color: var(--text-muted); font-size: 0.875rem;">Fix failing prompts with a systematic
                        debugging framework</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Trendtactics Academy</h3>
                    <p style="color: var(--text-secondary); line-height: 1.8;">
                        Empowering learners worldwide with cutting-edge digital skills.
                    </p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/services">Services</a></li>
                        <li><a href="/courses">Courses</a></li>
                        <li><a href="/blog">Blog</a></li>
                        <li><a href="/contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Learning</h3>
                    <ul>
                        <li><a href="/dashboard">Dashboard</a></li>
                        <li><a href="/playground">Code Playground</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Connect</h3>
                    <ul>
                        <li><a href="https://trendtacticsdigital.com" target="_blank">Trendtactics Digital</a></li>
                        <li><a href="/signup">Join Academy</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>2025 Trendtactics Academy. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="js/supabase-client.js"></script>
    <script src="js/auth.js"></script>
    <script>
        const COURSE_ID = 'a1b2c3d4-e5f6-7890-1234-567890abcdef'; // Prompt Engineering course UUID
        const COURSE_TITLE = 'Prompt Engineering Mastery'; // Use course title for API lookup

        async function initPage() {
            try {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);

                const authBtn = document.getElementById('authBtn');
                const dashboardLink = document.getElementById('dashboardLink');

                if (loggedIn) {
                    const user = JSON.parse(u)?.user;
                    if (authBtn) {
                        authBtn.textContent = user?.user_metadata?.name || user?.email || 'Account';
                        authBtn.onclick = () => window.location.href = '/dashboard';
                    }
                    if (dashboardLink) {
                        dashboardLink.style.display = 'block';
                    }
                    await checkEnrollment();
                } else {
                    if (authBtn) {
                        authBtn.textContent = 'Sign In';
                        authBtn.onclick = () => window.location.href = '/signup';
                    }
                    if (dashboardLink) {
                        dashboardLink.style.display = 'none';
                    }
                }
            } catch (error) {
                console.error('Auth initialization error:', error);
                // Continue without auth functionality if there's an error
                const authBtn = document.getElementById('authBtn');
                const dashboardLink = document.getElementById('dashboardLink');

                if (authBtn) {
                    authBtn.textContent = 'Sign In';
                    authBtn.onclick = () => window.location.href = '/signup';
                }
                if (dashboardLink) {
                    dashboardLink.style.display = 'none';
                }
            }
        }

        async function checkEnrollment() {
            try {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);

                if (!loggedIn) return;

                const user = JSON.parse(u)?.user;
                if (!user) return;

                // First, get the course ID by title
                const courseResponse = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/courses?title=' + encodeURIComponent(COURSE_TITLE));
                let courseId = null;

                if (courseResponse.ok) {
                    const courseData = await courseResponse.json();
                    if (courseData && courseData.id) {
                        courseId = courseData.id;
                    }
                }

                if (!courseId) {
                    // Fallback to the hardcoded ID if the API call fails
                    courseId = COURSE_ID;
                }

                const session = JSON.parse(s);
                const token = session?.access_token || session?.session?.access_token;

                // Check if user has access to this course
                const response = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/get-student-courses', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        user_id: user.id
                    })
                });

                if (!response.ok) {
                    throw new Error(`Failed to check enrollment: ${response.status}`);
                }

                const data = await response.json();
                const courses = data.courses || [];
                const hasAccess = courses.some(course => course.course_id === courseId);

                if (hasAccess) {
                    const enrollBtnText = document.getElementById('enrollBtnText');
                    const enrollBtn = document.getElementById('enrollBtn');
                    if (enrollBtnText) {
                        enrollBtnText.textContent = 'Continue Learning';
                    }
                    if (enrollBtn) {
                        enrollBtn.onclick = () => window.location.href = '/lesson-viewer?course=' + courseId;
                    }
                }
            } catch (error) {
                console.log('Not enrolled yet');
            }
        }

        function handleAuthClick() {
            // Check if user is logged in by checking for session and user data
            const s = localStorage.getItem('supabase_session');
            const u = localStorage.getItem('supabase_user');
            const loggedIn = !!(s && u);

            if (loggedIn) {
                // If logged in, go to dashboard
                window.location.href = '/dashboard';
            } else {
                // If not logged in, go to signup/login
                window.location.href = '/signup';
            }
        }

        // Handle purchase - add course access
        async function handlePurchase() {
            try {
                // Check if user is logged in by checking for session and user data
                const s = localStorage.getItem('supabase_session');
                const u = localStorage.getItem('supabase_user');
                const loggedIn = !!(s && u);

                if (!loggedIn) {
                    alert("Please log in to enroll");
                    window.location.href = '/signup';
                    return;
                }

                // Get the course ID by title first
                let courseId = null;
                try {
                    const courseResponse = await fetch('https://uimdbodamoeyukrghchb.supabase.co/functions/v1/courses?title=' + encodeURIComponent(COURSE_TITLE));

                    if (courseResponse.ok) {
                        const courseData = await courseResponse.json();
                        if (courseData && courseData.id) {
                            courseId = courseData.id;
                        }
                    }
                } catch (error) {
                    console.error('Error fetching course ID:', error);
                }

                if (!courseId) {
                    // Fallback to the hardcoded ID if the API call fails
                    courseId = COURSE_ID;
                }

                const session = JSON.parse(s);
                const token = session?.access_token || session?.session?.access_token;

                const res = await fetch(
                    "https://uimdbodamoeyukrghchb.supabase.co/functions/v1/add-course-access",
                    {
                        method: "POST",
                        headers: {
                            "Authorization": `Bearer ${token}`,
                            "Content-Type": "application/json"
                        },
                        body: JSON.stringify({
                            course_id: courseId,
                            user_id: JSON.parse(u).user.id
                        })
                    }
                );

                if (!res.ok) {
                    const err = await res.text();
                    throw new Error(err);
                }

                alert("Enrollment successful!");
                location.reload();
            } catch (err) {
                console.error("Enrollment error:", err);

                // Show error message
                const messageDiv = document.getElementById('enrollMessage');
                if (messageDiv) {
                    messageDiv.textContent = 'Error enrolling in course. Please try again. Details: ' + err.message;
                    messageDiv.style.background = 'rgba(239, 68, 68, 0.2)';
                    messageDiv.style.color = '#EF4444';
                    messageDiv.style.display = 'block';
                }
            }
        }

        function toggleMobileNav() {
            const nav = document.querySelector('.nav');
            nav.classList.toggle('active');

            // Update button text based on state
            const toggleBtn = document.querySelector('.mobile-nav-toggle');
            if (nav.classList.contains('active')) {
                toggleBtn.textContent = '✕ Close';
            } else {
                toggleBtn.textContent = '☰ Menu';
            }
        }

        // Close navigation when clicking outside on mobile
        document.addEventListener('click', function (event) {
            const nav = document.querySelector('.nav');
            const toggleBtn = document.querySelector('.mobile-nav-toggle');

            if (window.innerWidth <= 768 &&
                nav.classList.contains('active') &&
                !nav.contains(event.target) &&
                event.target !== toggleBtn) {
                nav.classList.remove('active');
                toggleBtn.textContent = '☰ Menu';
            }
        });

        initPage();
    </script>
</body>

</html>